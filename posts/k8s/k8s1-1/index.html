<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>Kubernetes Partie 1</title>
    <meta name="description" content="">
    <meta name="keywords" content='blog, makhal, cyber, SIEM, BUT R&amp;T, kubernetes, docker, devops'>

    <meta property="og:url" content="https://makhal.fr/posts/k8s/k8s1-1/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kubernetes Partie 1">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://makhal.fr/images/avatar.jpg">
    <meta property="og:image:secure_url" content="https://makhal.fr/images/avatar.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kubernetes Partie 1">
    <meta name="twitter:description" content="">
    <meta property="twitter:domain" content="https://makhal.fr/posts/k8s/k8s1-1/">
    <meta property="twitter:url" content="https://makhal.fr/posts/k8s/k8s1-1/">
    <meta name="twitter:image" content="https://makhal.fr/images/avatar.jpg">

    
    <link rel="canonical" href="https://makhal.fr/posts/k8s/k8s1-1/" />

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.893af8dd3b65bd0ffe90e7af33847bd6dc9180b8fa6d6659a212a6f4b62d3e01.js" integrity="sha256-iTr43TtlvQ/&#43;kOevM4R71tyRgLj6bWZZohKm9LYtPgE="></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6QF6WSBEBS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6QF6WSBEBS');
    </script>
    
    
          <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap">
    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">
        
        
            <div class="avatar">
                <a href="https://makhal.fr/">
                    <img src="https://makhal.fr//images/avatar.jpg" alt="avatar" />
                </a>
            </div>
        

        
        <div class="nav-title">
            <a class="nav-brand" href="https://makhal.fr/">makhal.fr</a>
        </div>

        
        <div class="nav-links">
            
                <div class="nav-link">
                    <a href="https://makhal.fr/posts/"> Posts </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://makhal.fr/tags/"> Tags </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://makhal.fr/pages/about/"> About </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://www.linkedin.com/in/mohamad-el-akhal-8b8319221/"><span data-feather='linkedin'></span>  </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://github.com/tutanka01"><span data-feather='github'></span>  </a>
                </div>
            

            
            <span class="nav-icons-divider"></span>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">   
                
                    <li class="nav-item">
                        <a href="https://makhal.fr/posts/"> Posts </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://makhal.fr/tags/"> Tags </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://makhal.fr/pages/about/"> About </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://www.linkedin.com/in/mohamad-el-akhal-8b8319221/"><span data-feather='linkedin'></span>  </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://github.com/tutanka01"><span data-feather='github'></span>  </a>
                    </li>
                
        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Kubernetes Partie 1</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            mai 19, 2024
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://makhal.fr/tags/kubernetes">kubernetes</a></li>
        
            <li class="post-tag"><a href="https://makhal.fr/tags/docker">docker</a></li>
        
            <li class="post-tag"><a href="https://makhal.fr/tags/devops">devops</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <h1 id="kubernetes-a-ma-façon">Kubernetes a ma façon</h1>
<h2 id="introduction">Introduction</h2>
<p>J&rsquo;espère que vous allez bien. Aujourd&rsquo;hui, je me suis décidé à me lancer dans Kubernetes, au moins dans l&rsquo;écriture de posts à ce sujet. Dans mon blog, je vais vous montrer mes avancées et ma compréhension au fur et à mesure des articles sur cette technologie que je trouve incroyable. Malgré les défis, j&rsquo;ai réussi à avoir une vision plus claire de cette technologie.</p>
<p><img src="/images/k8s/meme1.png" alt="alt text"></p>
<p>J&rsquo;espère que vous allez apprécier et si jamais vous souhaitez plus de contenu comme celui-ci, n&rsquo;hésitez pas à me le faire savoir.</p>
<h2 id="quest-ce-que-kubernetes-">Qu&rsquo;est-ce que Kubernetes ?</h2>
<p>Déjà, quand vous entendez Kubernetes, à quoi pensez-vous ? Honnêtement, on ne peut pas imaginer grand-chose avec ce nom imposant. Cependant, ne vous y trompez pas, Kubernetes ou K8s (car il y a 8 lettres après le K :) ) a drastiquement changé la façon dont les systèmes et les applications sont gérés de nos jours.</p>
<p>Depuis longtemps, nous ne sommes plus dans l&rsquo;optique d&rsquo;un serveur = un service, et encore moins d&rsquo;une VM = un service. Nous sommes plutôt dans l&rsquo;esprit de 1 service = 1 conteneur. Bien que cela ne soit pas une norme absolue, c&rsquo;est la recommandation des plus grandes entreprises qui utilisent ce genre de technologie.</p>
<p>Du coup, Kubernetes, c&rsquo;est quoi exactement ? Tout simplement (enfin, pas trop), K8s permet de gérer plusieurs services répartis sur un grand nombre de travailleurs, c&rsquo;est-à-dire des machines qui exécutent principalement ces services. Ces travailleurs sont contrôlés par un patron, qui, dans notre cas, est une tour de contrôle. Cette tour de contrôle s&rsquo;assure que toutes les demandes sont satisfaites et, si ce n&rsquo;est pas le cas, elle fera tout son possible pour équilibrer la demande et l&rsquo;offre.</p>
<p>Peut-être que je vous ai un peu perdu avec cette explication, mais au fur et à mesure des posts, ce sera 1000 fois plus clair, car rien ne vaut la pratique.</p>
<p>Si on va dans les détails, ces fameux services sont hébergés dans ce que l&rsquo;on appelle des conteneurs. Si vous ne savez pas ce qu&rsquo;est un conteneur, je vous invite à aller regarder mes posts à propos de <a href="https://makhal.fr/posts/docker/docker_1/">Docker</a> (promis, je vais finir la série de tutoriels un jour). Mais un conteneur, vous pouvez le voir comme un carton : un carton où l&rsquo;on met des choses dedans et que l&rsquo;on jette lorsqu&rsquo;on n&rsquo;en a plus besoin.</p>
<p>Maintenant, pourquoi Kubernetes et non une autre technologie ?</p>
<h2 id="pourquoi-kubernetes-">Pourquoi Kubernetes ?</h2>
<p>Kubernetes est devenu la norme de facto pour l&rsquo;orchestration de conteneurs grâce à ses nombreux avantages :</p>
<ul>
<li>
<p><strong>Auto-scaling :</strong> Kubernetes permet de faire du scaling automatique, si votre application a besoin de plus de ressources, Kubernetes va ajouter des conteneurs pour satisfaire les besoins de votre application. Et si votre application n&rsquo;a plus besoin de ces ressources ajoutées, Kubernetes va supprimer les conteneurs en trop.</p>
</li>
<li>
<p><strong>Load Balancing :</strong> Kubernetes est parfait pour faire du load balancing, c&rsquo;est-à-dire que si vous avez plusieurs conteneurs qui font la même chose, Kubernetes va s&rsquo;assurer que les requêtes sont bien réparties sur les conteneurs.</p>
</li>
<li>
<p><strong>Rolling Updates :</strong> Kubernetes permet de faire des mises à jour en douceur, c&rsquo;est-à-dire que si vous avez une nouvelle version de votre service vous allez pouvoir petit à petit mettre à jour votre application sans que les utilisateurs ne s&rsquo;en rendent compte. Ça permet de faire des mises à jour sans downtime.</p>
</li>
<li>
<p><strong>Storage Orchestration :</strong> Kubernetes permet de gérer le stockage, si vous avez besoin de stockage pour votre application, Kubernetes va s&rsquo;assurer que le stockage est bien géré. Et qu&rsquo;il sera uniforme pour tous les conteneurs.</p>
</li>
</ul>
<p>Ainsi, Kubernetes est devenu indispensable dans le domaine de l&rsquo;IT. Par exemple, lorsqu&rsquo;on recherche le mot &ldquo;Kubernetes&rdquo; sur Indeed, on trouve près de 3 000 offres d&rsquo;emploi !</p>
<p><img src="/images/k8s/indeed.png" alt="Indeed"></p>
<p>Si on met de côté l&rsquo;argent, Kubernetes répond à une infinité de scénarios. Par exemple, si je veux lancer mon super site web de vente de cacahuètes, je souhaite qu&rsquo;il me coûte le moins cher possible, tout en étant rapide et efficace : Kubernetes est la solution. Si j&rsquo;ai une solution d&rsquo;analyse de logs en temps réel, nécessitant un calcul rapide et une visualisation encore plus rapide, le tout de manière distribuée sur plusieurs datacenters et avec plus de 2000 nœuds : Kubernetes répond à cela et plus encore !</p>
<p>Comme vous pouvez le voir, Kubernetes peut répondre à toutes les exigences possibles et imaginables. Mais ne nous voilons pas la face, maîtriser cet outil demande du temps, beaucoup de temps. Cependant, avec constance et rigueur, vous pouvez atteindre de grandes choses avec cet outil.</p>
<h2 id="avant-de-commencer">Avant de commencer</h2>
<p>Bien entendu, pour pouvoir utiliser Kubernetes, il faut avoir des connaissances en conteneurisation et en conteneurs. Si vous n&rsquo;avez pas ces connaissances, je vous conseille de lire mon post sur Docker, qui est un outil qui permet de créer des conteneurs. Et qui est très utilisé dans le monde de Kubernetes.</p>
<blockquote>
<p><a href="https://makhal.fr/posts/docker/docker_1/">Docker pour les débutants</a></p>
</blockquote>
<h2 id="comment-ça-marche-">Comment ça marche ?</h2>
<p>Maintenant que vous savez ce que c&rsquo;est et pourquoi c&rsquo;est utile, on va voir comment ça marche. Pour cela je vais suivre une methode appele &ldquo;top-down approach&rdquo;, qui consiste a regarder les choses en plusieurs etapes, vue d&rsquo;oiseux, vue de haut d&rsquo;un immeuble, vu a pied, et ainsi de suite. Cela j&rsquo;ai trouve c&rsquo;est la meilleure façon d&rsquo;apprendre car elle va donner l&rsquo;eau a la bouche aux gens qui debutent pour aller encore plus en detail.</p>
<p>Kubernets c&rsquo;est base sur un fonctionnement simple, on a un Patron et on a des Employes. Le patron s&rsquo;appelle &ldquo;Control-Plane&rdquo; ce control-plane est ni plus ni moins qu&rsquo;un serveur, virtualise ou non, qui va gerer tout ce qui se passe dans sa propriete (cluster), il va s&rsquo;occuper de trois choses principalement, avant de parler de ça je vous laisse une petite image qui l&rsquo;explique :</p>
<p><img src="/images/k8s/diagramme_k8s.png" alt="Image_k8s_1"></p>
<blockquote>
<p><a href="https://www.cncf.io/wp-content/uploads/2020/09/Kubernetes-architecture-diagram-1-1-1024x698.png">Source</a></p>
</blockquote>
<p>On constate qu&rsquo;il y a trois elements <strong>ESSENTIELS</strong> :</p>
<ul>
<li>
<p><strong>API Server :</strong> C&rsquo;est le composant qui expose l&rsquo;API Kubernetes. C&rsquo;est l&rsquo;interface principale pour le cluster Kubernetes. Il implémente une interface RESTful, qui permet aux utilisateurs et aux composants internes de communiquer avec le cluster Kubernetes. C&rsquo;est du coup la seule porte d&rsquo;entrée pour le cluster Kubernetes. Et c&rsquo;est avec cette API que l&rsquo;on va pouvoir gérer notre cluster.</p>
</li>
<li>
<p><strong>Scheduler :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs sont bien répartis sur les nodes. A chaque nouveau pod lui il va s&rsquo;occuper d&rsquo;attribuer automatiquement ces pods vers un conteneur vide selon un algorithme interne a K8&rsquo;s</p>
</li>
<li>
<p><strong>Controller Manager :</strong> C&rsquo;est l&rsquo;outil qui s&rsquo;assure que les nodes et les conteneurs sont en bon état, en surveillant l&rsquo;état du cluster d&rsquo;une manniere constant, et si jamai il constate quelque chose qu&rsquo;il n&rsquo;aime pas il va essayer de faire emmenner l&rsquo;etat du cluster vers l&rsquo;etat desire qu&rsquo;on lui a dit.</p>
</li>
<li>
<p><strong>etcd :</strong> C&rsquo;est le composant qui stocke les données du cluster Kubernetes, comme les configurations des nodes et des conteneurs, c&rsquo;est un genre de BDD ou tout ce qui se passe dans le cluster est renvoie vers cette BDD pour une future analyse des elements du cluster&hellip;</p>
</li>
</ul>
<p>Les nodes sont également composés de quelques services qui permettent de gérer les conteneurs :</p>
<ul>
<li>
<p><strong>Kubelet :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs sont en bon état, en surveillant l&rsquo;état des conteneurs localement. Tout evenement qu&rsquo;il aura il va renvoyer routes les informations au Control-Plane grace a l&rsquo;<strong>API-Server</strong></p>
</li>
<li>
<p><strong>Kube-proxy :</strong> Il s&rsquo;assure que les conteneurs sont accessibles, en configurant les règles de routage.</p>
</li>
<li>
<p><strong>Container Runtime :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs s&rsquo;exécutent, on peut dire que c&rsquo;est lui qui fait le travail, comme par exemple Docker et/ou ContainerD ou même Podman.</p>
</li>
</ul>
<p>J&rsquo;ai mis une grande quantite de details expres, pour vous montrer dans les posts suivants les details plus techniques pour vous montrer comment cela fonctionne d&rsquo;une manniere plus precise.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Je sais je suis parti un peu vite dans le sujet, mais ne vous inquiétez pas, je vais dans les prochains posts, vous montrer comment faire pour déployer un cluster Kubernetes pour faire nos tests, mais avant ça, je vais vous presenter <strong>TOUTES</strong> les fonctions que le controller manager a pour bien gerer tout un cluster, et aussi comment déployer des applications sur ce cluster.</p>
<p>Je vous remercie d&rsquo;avoir lu ce post, et j&rsquo;espère que vous avez appris quelque chose. Si vous avez des questions, n&rsquo;hésitez pas à me contacter, je serais ravi de vous aider.</p>

        </p>
        
        
            <script
  type="application/javascript"
  src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"
></script>
<script>
  var config = {
    startOnLoad: true,
    theme:'dark',
    align:'center',
  };
  mermaid.initialize(config);
</script>
        
    </div>

    <div class="prev-next">
        
            
                
<div class="prev-post">
    <p>
        <a href="/posts/docs/maj_ios_tftp/">
            &#8592;
            :
            Mise a jour manuelle d&#39;un Switch Cisco par TFTP
        </a>
    </p>
    <p class="prev-post-date">
        avril 21, 2024
    </p>
</div>



<div class="next-post">
    <p>
        <a href="/posts/cyber/decouverte_siem/">
            :
            Decouverte de Wazuh
            &#8594;
        </a>
    </p>
        <p class="next-post-date">
            août 7, 2024
        </p>
</div>


            
        
    </div>
</div>



    

        </main><footer class="footer">
    
    

    
    <span>&copy; 2024 makhal.fr</span>
    
</footer>
</body>
</html>
