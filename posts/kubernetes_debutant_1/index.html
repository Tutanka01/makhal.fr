<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>Kubernetes Partie 1</title>
    <meta name="description" content="">
    <meta name="keywords" content='kubernetes, docker, devops'>

    <meta property="og:url" content="https://tutanka01.github.io/posts/kubernetes_debutant_1/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Kubernetes Partie 1">
    <meta property="og:description" content="">
    <meta property="og:image" content="https://tutanka01.github.io/images/avatar.jpg">
    <meta property="og:image:secure_url" content="https://tutanka01.github.io/images/avatar.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Kubernetes Partie 1">
    <meta name="twitter:description" content="">
    <meta property="twitter:domain" content="https://tutanka01.github.io/posts/kubernetes_debutant_1/">
    <meta property="twitter:url" content="https://tutanka01.github.io/posts/kubernetes_debutant_1/">
    <meta name="twitter:image" content="https://tutanka01.github.io/images/avatar.jpg">

    
    <link rel="canonical" href="https://tutanka01.github.io/posts/kubernetes_debutant_1/" />

    
    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print">

    
    <link rel="stylesheet" type="text/css" href="/css/main.min.css">

    
    <link id="dark-theme" rel="stylesheet" href="/css/dark.min.css">

    
    <script src="/js/bundle.min.27043ee3e4fae9fba993230b5c2ba193e1f265beeea9c49a69d028f72b22ccb5.js" integrity="sha256-JwQ&#43;4&#43;T66fupkyMLXCuhk&#43;HyZb7uqcSaadAo9ysizLU="></script>
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6QF6WSBEBS"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-6QF6WSBEBS');
    </script>
    
    
          <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap">
    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">
        
        
            <div class="avatar">
                <a href="https://tutanka01.github.io/">
                    <img src="https://tutanka01.github.io//images/avatar.jpg" alt="avatar" />
                </a>
            </div>
        

        
        <div class="nav-title">
            <a class="nav-brand" href="https://tutanka01.github.io/">makhal.fr</a>
        </div>

        
        <div class="nav-links">
            
                <div class="nav-link">
                    <a href="https://tutanka01.github.io/posts/"> Posts </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://tutanka01.github.io/tags/"> Tags </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://tutanka01.github.io/pages/about/"> About </a>
                </div>
            
                <div class="nav-link">
                    <a href="https://github.com/tutanka01"><span data-feather='github'></span>  </a>
                </div>
            

            
            <span class="nav-icons-divider"></span>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">   
                
                    <li class="nav-item">
                        <a href="https://tutanka01.github.io/posts/"> Posts </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://tutanka01.github.io/tags/"> Tags </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://tutanka01.github.io/pages/about/"> About </a>
                    </li>
                
                    <li class="nav-item">
                        <a href="https://github.com/tutanka01"><span data-feather='github'></span>  </a>
                    </li>
                
        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Kubernetes Partie 1</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            décembre 3, 2023
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://tutanka01.github.io/tags/kubernetes">kubernetes</a></li>
        
            <li class="post-tag"><a href="https://tutanka01.github.io/tags/docker">docker</a></li>
        
            <li class="post-tag"><a href="https://tutanka01.github.io/tags/devops">devops</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <h1 id="kubernetes-pour-les-débutants">Kubernetes pour les débutants</h1>
<h2 id="introduction">Introduction</h2>
<p>Bonjour a tous j&rsquo;espere que vous allez bien, sur ce post je vais vous presenter un outil que j&rsquo;essaie de maitriser depuis un moment. Et vu le manque de posts FR bien faits et complets sur le sujet, je me suis dit pourquoi pas faire un post sur le sujet.</p>
<h2 id="quest-ce-que-kubernetes-">Qu&rsquo;est ce que Kubernetes ?</h2>
<p>Deja, quand vous entendez kubernetes, vous pensez a quoi ? Moi je pense a un orchestrateur de conteneurs, et c&rsquo;est exactement ce que c&rsquo;est !!</p>
<p>Peut etre vous pensiez a autre chose mais c&rsquo;est pas grave, je vais vous expliquer quand meme ce que c&rsquo;est.</p>
<p>Kubernetes est un orchestrateur de conteneurs open source, et c&rsquo;est un outil qui permet de gérer des microservices, donc du coup tout ce qui est containers, Docker, etc&hellip;</p>
<p>Et c&rsquo;est ce qu&rsquo;on peut traiter commer, l&rsquo;alternative a <em><strong>Docker Swarm</strong></em>, beaucoup plus proffessionnelle et <em><strong>production-ready</strong></em>. Malgre qu&rsquo;il soit un outil complexe, et complique a maitriser, il est tres puissant, et tres utile.</p>
<p>En resume cela permettra une H.A (haute disponnibilite), pour n&rsquo;importe qu&rsquo;elle application que vous allez developper. Comme par exemple, un site web, une API, une application mobile. Tenez en compte que Kubernetes est tres flexible, et il peut s&rsquo;adapter a n&rsquo;importe quelle application. Tant que cette derniere est, on peut dire &ldquo;containerisee&rdquo;.</p>
<p>Sur ce tuto j&rsquo;utiliserais Docker, mais si vous etes plus alaise avec Podman ou n&rsquo;importe quelle autre techno qui gere des containers avec <em><strong>ContainerD</strong></em> ou autre, kubernetes le supporte aussi, donc vous pourrez suivre ce tuto tranquillement.</p>
<h2 id="pourquoi-kubernetes-">Pourquoi Kubernetes ?</h2>
<p>Kubenetes resout un probleme qui est le suivant : Comment gérer un grand nombre de conteneurs?? J&rsquo;ai deja eu ce probleme quand j&rsquo;ai voulu deployer une application, je voulais qu&rsquo;il soit disponible tout le temps, et c&rsquo;est la que Kubernetes intervient.</p>
<p>Kubernetes permet de faire ça, il permet de gérer un grand nombre de conteneurs et de les rendre disponible tout le temps (Haute disponibilité). Mais aussi il permet de faire un autre tas de choses, comme par exemple :</p>
<ul>
<li>
<p><strong>Auto-scaling :</strong> Kubernetes permet de faire du scaling automatique, si votre application a besoin de plus de ressources, Kubernetes va ajouter des conteneurs pour satisfaire les besoins de votre application. Et si votre application n&rsquo;a plus besoin de ces ressources ajoutees, Kubernetes va supprimer les conteneurs en trop.</p>
</li>
<li>
<p><strong>Load Balancing :</strong> Kubernetes permet de faire du load balancing, c&rsquo;est a dire que si vous avez plusieurs conteneurs qui font la meme chose, Kubernetes va s&rsquo;assurer que les requetes sont bien reparties sur les conteneurs.</p>
</li>
<li>
<p><strong>Rolling Updates :</strong> Kubernetes permet de faire des mises a jour en douceur, c&rsquo;est a dire que si vous avez une nouvelle version de votre application vous allez pouoir petit a petit mettre a jour votre application sans que les utilisateurs ne s&rsquo;en rendent compte. ça permet de faire des mises a jour sans downtime.</p>
</li>
<li>
<p><strong>Storage Orchestration :</strong> Kubernetes permet de gerer le stockage, si vous avez besoin de stockage pour votre application, Kubernetes va s&rsquo;assurer que le stockage est bien gere. Et qu&rsquo;il sera uniforme pour tous les conteneurs.</p>
</li>
</ul>
<h2 id="comment-ça-marche-">Comment ça marche ?</h2>
<p>Maintenant que vous savez ce que c&rsquo;est et pourquoi c&rsquo;est utile, on va voir comment ça marche.</p>
<p>Kubernetes est base sur le systeme de master (ou control-plane) et des nodes, le master gere les nodes et les nodes hebergent les conteneurs.</p>
<p>Voila un schema qui explique comment ça marche:</p>
<p><img src="/images/diagramme_k8s.png" alt="Image_k8s_1"></p>
<blockquote>
<p><a href="https://www.cncf.io/wp-content/uploads/2020/09/Kubernetes-architecture-diagram-1-1-1024x698.png">Source</a></p>
</blockquote>
<p>Le master gere les nodes et les nodes hebergent les conteneurs, mais comment ça marche ?</p>
<p>Il faut savoir que le Master (Control Plane) est compose de plusieurs composants :</p>
<ul>
<li>
<p><strong>API Server :</strong> C&rsquo;est le composant qui expose l&rsquo;API Kubernetes. C&rsquo;est l&rsquo;interface principale pour le cluster Kubernetes. Il implémente une interface RESTful, qui permet aux utilisateurs et aux composants internes de communiquer avec le cluster Kubernetes. C&rsquo;est du coup la seule porte d&rsquo;entree pour le cluster Kubernetes. Et c&rsquo;est avec cette API que l&rsquo;on va pouvoir gerer notre cluster.</p>
</li>
<li>
<p><strong>Scheduler :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs sont bien repartis sur les nodes. Il s&rsquo;assure que les conteneurs sont bien repartis sur les nodes en fonction des ressources disponibles.</p>
</li>
<li>
<p><strong>Controller Manager :</strong> C&rsquo;est l&rsquo;outil qui s&rsquo;assure que les nodes et les conteneurs sont en bon etat, en surveillant l&rsquo;etat du cluster Kubernetes.</p>
</li>
<li>
<p><strong>etcd :</strong> C&rsquo;est le composant qui stocke les donnees du cluster Kubernetes, comme les configurations des nodes et des conteneurs&hellip;</p>
</li>
</ul>
<div class="mermaid">
graph LR
A[API Server] --> B[Scheduler]
A --> C[Controller Manager]
A --> D[etcd]
</div>
<p>Les nodes sont sont egalement composes de queques services qui permettent de gerer les conteneurs:</p>
<ul>
<li>
<p><strong>Kubelet :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs sont en bon etat, en surveillant l&rsquo;etat des conteneurs.</p>
</li>
<li>
<p><strong>Kube-proxy :</strong> Il s&rsquo;assure que les conteneurs sont accessibles, en configurant les regles de routage.</p>
</li>
<li>
<p><strong>Container Runtime :</strong> C&rsquo;est le composant qui s&rsquo;assure que les conteneurs s&rsquo;executent on peut dire que c&rsquo;est lui qui fait le travail, comme par exemple Docker et/ou ContainerD ou meme Podman.</p>
</li>
</ul>
<h2 id="comment-installer-kubernetes-">Comment installer Kubernetes ?</h2>
<p>Maintenant que vous savez ce que c&rsquo;est et comment ça marche, on va voir comment l&rsquo;installer. Voila les deux outils principaux pour administrer votre cluster Kubernetes:</p>
<ul>
<li><strong>Kubeadm :</strong> C&rsquo;est l&rsquo;outil qui permet d&rsquo;installer Kubernetes.</li>
<li><strong>Kubectl :</strong> C&rsquo;est l&rsquo;outil qui permet de gerer Kubernetes. Il permet de gerer Kubernetes en executant des commandes.</li>
</ul>
<p>Pour une installation simplifie, je vais utiliser minikube, qui est un outil qui permet d&rsquo;installer Kubernetes en local. Pour l&rsquo;installer, il faut executer la commande suivante :</p>
<blockquote>
<p>Pour info, je suis sur Windows 11, donc je vais utiliser chocolatey pour tout installer</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>choco install minikube
</span></span></code></pre></div><p>Une fois que c&rsquo;est installe, il faut lancer minikube avec la commande suivante :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>minikube start
</span></span></code></pre></div><p>Une fois cette commande lancees. Il faudra bien sur avoir, VirtualBox et/ou Hyper-V d&rsquo;installe sur votre machine.</p>
<p>Si vous voulez plus de details, voila la doc de minikube:</p>
<blockquote>
<p><a href="https://minikube.sigs.k8s.io/docs/">Minikube</a></p>
</blockquote>
<p>Dans cette VM, Minikube va initialiser un cluster <em><strong>Kubernetes</strong></em> et va faire tout le necessaire pour nous donner acces a notre Cluster Kubernetes. Dans ce cas, notre <em><strong>Cluster</strong></em> sera compose d&rsquo;un seul <em><strong>Node</strong></em>, qui sera en meme temps le <em><strong>Master</strong></em> (des fois les gens l&rsquo;appellent aussi control-plane&hellip;) et le <em><strong>Node</strong></em>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Je sais je suis parti un peu vite dans le sujet, mais ne vous inquitez pas, je vais dans les prochains posts, vous montrer comment faire pour deployer un cluster Kubernetes dans des conditions &ldquo;reelles&rdquo;, et aussi comment deployer des applications sur ce cluster. Mais aussi egalement vous donner plus de details a propos de la theorie de Kubernetes.</p>
<p>Je prefere que vous mettiez les mains dans le cambouis, et que vous voyez par vous meme comment ça marche, et comment ça se passe. Mais cela n&rsquo;empeche pas que je vais vous donner des details sur la theorie de Kubernetes, et comment ça marche.</p>
<p>Je vous remercie d&rsquo;avoir lu ce post, et j&rsquo;espere que vous avez appris quelque chose. Si vous avez des questions, n&rsquo;hesitez pas a me contacter, je serais ravi de vous aider.</p>

        </p>
        
        
            <script
  type="application/javascript"
  src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"
></script>
<script>
  var config = {
    startOnLoad: true,
    theme:'dark',
    align:'center',
  };
  mermaid.initialize(config);
</script>
        
    </div>

    <div class="prev-next">
        
            
                
<div class="prev-post">
    <p>
        <a href="/posts/docker-swarm/">
            &#8592;
            :
            Docker Swarm
        </a>
    </p>
    <p class="prev-post-date">
        octobre 23, 2023
    </p>
</div>



<div class="next-post">
    <p>
        <a href="/posts/dmark_dkim_spf/">
            :
            Sécurisation Avancée des Services de Messagerie
            &#8594;
        </a>
    </p>
        <p class="next-post-date">
            janvier 28, 2024
        </p>
</div>


            
        
    </div>
</div>



    

        </main><footer class="footer">
    
    

    
    <span>&copy; 2024 makhal.fr</span>
    
</footer>
</body>
</html>
